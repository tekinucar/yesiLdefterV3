

begin transaction 

create table STK_GCB
(
	ID                  Int IDENTITY(1,1) NOT NULL, 
    FIRM_ID             Int                 NULL,
    ISACTIVE            SmallInt            NULL, /* 0 = taslak fiş, 1.aktif fiş, 9 = silindi */

	KILIT				SmallInt            NULL, /* 0 = Edit için açık,  1 = Kilitli, Edit yapılamaz */
	GC_TURU				Int	                NULL, /* GİRİŞ ÇIKIŞ TÜRÜ = 5050 ' KÜÇÜK OLANLAR GİRİŞ, 5050'DEN BÜYÜK OLANLAR ÇIKIŞ HAREKETLERİ */
	SATIS_TIPI			SmallInt			NULL, /* 0, 1 = işyerinde, 2 = fastfood, 3 = paket  */ 
	MODUL_TD			SmallInt			NULL, /* CARI HESAP,,,, */
 	CARI_ID				Int 		 		NULL,
	
	ISLEM_TARIHI		Date    			NULL,
	ISLEM_SAAT			VarChar(8)			NULL,

	BELGE_FISNO2 		VarChar(15) 		NULL,      /* A_FIS_NUMARASI tablosundan Her Hareket Türü için SERI_ADI kullanarak bir numara alacak */
	ACIKLAMA			VarChar(200) 		NULL,
	REFERANS			VarChar(50)			NULL,

	FAT_TARIHI			Date    			NULL, /* İrsaliye içinde aynı fieldler kullanılacak */
	FAT_SERI			VarChar(15)			NULL,
	FAT_NO				VarChar(20)			NULL,
	FAT_TIPI            SmallInt            NULL, /* 0 = Normal, 1 = EFatura */

	VADE_GUN            SmallInt            NULL,
	VADE_TARIHI			Date                NULL,

	PARA_TURU 			SmallInt			NULL, /* 0- TL  0 > Dolar, Mark */
	DOVIZ_YERI_ID 		Int		 			NULL,
	DOVIZ_KURU 			Numeric(12,5)		NULL,

	GIRIS_YERI_ID		Int					NULL, /* GİRİŞ  Yapan Yer, Araç */
	CIKIS_YERI_ID		Int					NULL, /* Satışı Yapan Yer, Araç */
	SATIS_PER_ID		Int					NULL, /* Bu fieldler Satış için tanımlandı fakat */
	ALIMI_YAPAN			VarChar(30) 		NULL, /* Satın alma için de aynı fieldler kullanılacak */
	SIP_ALIS_SAAT		VarChar(8)			NULL, 
	
	TESLIMAT_DRM_ID		SmallInt 			NULL,
	TESLIMAT_PER_ID		Int					NULL,
	TESLIM_ALAN			VarChar(30)			NULL,
	TESLIM_SAAT	        VarChar(8)			NULL,

	/* BUNLARA GÖRE DÜZENLE */
	/* 0- AÇIK  1-TAHSIL EDILDI & ODENDI  2- Cari Hesaba yaz, 7- içi boşaltılmış fiş, 8- Cari Hesaba Yansıtma  9- İPTAL */  

	TAHSILAT_DRM_ID		SmallInt			NULL,
	TAHSILAT_PER_ID		Int					NULL,
	ODEMEYI_YAPAN		VarChar(30) 		NULL,
	TAHSILAT_SAAT       VarChar(8)			NULL,
		
	ISK_ONCESI_TUTAR	Numeric(22,5)		NULL, /* BURASI SATIRLARDAKİ TUTARLAR */
	ISK_ORANI			Numeric(12,8) 		NULL,
	ISK_TUTARI			Numeric(22,5)		NULL,
 	ISK_SONRASI_TUTAR	Numeric(22,5)		NULL,	
		
	FA_ISK1_ORANI		Numeric(12,8)		NULL,
	FA_ISK2_ORANI		Numeric(12,8)		NULL,
	FA_ISK3_ORANI		Numeric(12,8)		NULL,
	FA_ISK1_TUTARI		Numeric(22,8) 		NULL, 
	FA_ISK2_TUTARI		Numeric(22,8) 		NULL, 
	FA_ISK3_TUTARI		Numeric(22,8) 		NULL, 
	FA_ISKONTO_ORANI	Numeric(12,8)		NULL,
	FA_ISKONTO_TUTARI	Numeric(22,5) 		NULL, /* FATURA ALTI İSKONTO SONRASI TOPLAM TUTARI TL vaya DVZ olması ise PARA_TURU ne bağlı */
	FATURA_TUTARI		Numeric(22,5)		NULL,
	
	VERGI1_ID           Int                 NULL,
	VERGI1_TOPLAMI		Numeric(22,5)		NULL,
	VERGI2_ID           Int                 NULL,
	VERGI2_TOPLAMI		Numeric(22,5)		NULL,
    VERGI3_ID           Int                 NULL,
	VERGI3_TOPLAMI		Numeric(22,5)		NULL,
	VERGI_TOPLAMI		Numeric(22,5)		NULL,
	
	KDV_VARMI			SmallInt 	    	NULL, /* 0- KDV Uygulaması Var  1- KDV Uygulaması Yok */
	KDV18_MATRAHI		Numeric(22,5)		NULL, /* % 18 */
	KDV08_MATRAHI		Numeric(22,5)		NULL, /* %  8 */
	KDV01_MATRAHI		Numeric(22,5)		NULL, /* %  1 */
	KDV18_TUTARI		Numeric(22,5)		NULL, /* % 18 tutarı */
	KDV08_TUTARI		Numeric(22,5)		NULL, /* %  8 tutarı */
	KDV01_TUTARI		Numeric(22,5)		NULL, /* %  1 tutarı */
		
	TEVKIFAT_PAY        Numeric(3)		    NULL, /* 1 - 9 */
	TEVKIFAT_PAYDA      Numeric(3)          NULL, /* 10 */  
	TEVKIF_KDV_TUTARI	Numeric(22,5)		NULL, /*  (( kdv_tutarı / 10 payda ) X 7 pay )       tutarı */
	TEVKIF_DAHIL_TOPLAM Numeric(22,5)		NULL, /*  kdv_matrahı + kdv_tutarı = kdv dahil toplam  */

	KDV_TOPLAMI			Numeric(22,5)		NULL,
    GENEL_TOPLAM		Numeric(22,5)		NULL,
	PESINAT_TUTARI		Numeric(22,5) 		NULL,	
 	DOVIZ_TUTARI 		Numeric(22,5) 		NULL, /* Eğer GENEL_TOPLAM TL ise Döviz karşılığı, Döviz ise TL Karşılığı yazılıyor */
 	
	PROJE_ID			Int					NULL,
	BOLUM_ID			Int					NULL,
	ODAMASA_ID			Int					NULL,
	KISI_SAYISI			SmallInt			NULL,
	
    SON_DURUMU          SmallInt            NULL, /* 99.İPTAL, Hareketin SON DURUMU nu tutuyor. Faturası Kesildi gibi */
	RAPOR_ADEDI			SmallInt			NULL, /* BASILAN RAPOR SAYISI */
	FIS_KAYNAGI_TD      SmallInt            NULL, /* 0. Manuel Fiş, 1. Otomatik  (Şartlar oluşunca sebepleri eklenecek) */  
	SATIR_SAYISI		Int                 NULL,
	
	DONEM_YIL           SmallInt            NULL,
    DONEM_AY            SmallInt	        NULL,
    DONEM_GUN           SmallInt            NULL,

	PARENT_TD           SmallInt            NULL,
	PARENT_ID           Int                 NULL,
    ADRES_FAT_ID        Int                 NULL,
	ADRES_TES_ID        Int                 NULL,

	
 	constraint PK_STK_GCB primary key (ID)
) 
 -- mysql_add
 
 create index X_STK_GCB01 on STK_GCB (FIRM_ID, ISACTIVE);
 create index X_STK_GCB02 on STK_GCB (FIRM_ID, GC_TURU);
 create index X_STK_GCB03 on STK_GCB (FIRM_ID, CARI_ID, DONEM_YIL);
 create index X_STK_GCB04 on STK_GCB (FIRM_ID, ISLEM_TARIHI);
 create index X_STK_GCB05 on STK_GCB (FIRM_ID, VADE_TARIHI);
 create index X_STK_GCB06 on STK_GCB (FIRM_ID, CIKIS_YERI_ID);
 create index X_STK_GCB07 on STK_GCB (FIRM_ID, GIRIS_YERI_ID);
 create index X_STK_GCB08 on STK_GCB (FIRM_ID, DONEM_YIL, DONEM_AY, DONEM_GUN);
 
  
 grant select, insert, update, delete on STK_GCB to public

commit transaction


