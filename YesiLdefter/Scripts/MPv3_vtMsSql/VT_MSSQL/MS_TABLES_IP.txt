
begin transaction

  create table MS_TABLES_IP
  (
    REF_ID           Int IDENTITY(1,1)   NOT NULL,
    TABLE_CODE       VarChar(20)         NOT NULL,
    TABLE_TYPE       SmallInt            NULL,

    IP_CODE          VarChar(40)         NOT NULL,  
    TABLEIPCODE      VarChar(100)        NULL,  /* triger/procedure da TABLE_CODE +'.'+ IP_CODE birleþimi */ 
    IP_TYPE          SmallInt            NULL,  /* 1=Liste, 2=Bilgi Kartý, 3=  þimdililik bir iþe yaramýyor  */
    IP_ABOUT         VarChar(200) 	 NULL,  
    IP_CAPTION       VarChar(100)        NULL,
    IP_SELECT_SQL    VarChar(4000)       NULL,
    IP_WHERE_SQL     VarChar(250)        NULL,
    IP_ORDER_BY      VarChar(250)        NULL,
    EXTERNAL_IP_CODE          VarChar(40)         NULL,  

    VIEW_CMP_TYPE    SmallInt            NULL, /* Grid, LayoutView, LayoutPanel vb */
    CMP_PROPERTIES   VarChar(900)        NULL,
    NAVIGATOR        VarChar(2000)       NULL,
    DATA_READ        SmallInt            NULL, /* 0= Tablonun tamamýný okusun, 1=Kýsýtlama var   */
    FIND_FNAME       VarChar(300)        NULL, /* birden fazla fielde gerek duyulursa {0} , {1} formatýný kullan */
    DATA_FIND        SmallInt            NULL, /* 0= Find yok, 1. standart, 2. List&Data   */
    AUTO_INSERT      Bit                 NULL,
    

    /* Master Table Baðlantýsý */
    MASTER_TABLEIPCODE      VarChar(50)  NULL, /* data_Read = 3 ise eðer master_id valueyi hem hangi IP den okuyacaðýný bilecek, hemde master table insert olmamýþsa onu ýnsert edecek */
    MASTER_TABLE_NAME       VarChar(50)  NULL, 
    MASTER_KEY_FNAME        VarChar(30)  NULL,	
    FOREING_FNAME           VarChar(30)  NULL,	
    PARENT_FNAME            VarChar(30)  NULL, /* tree viewler için gerekli */

    /* Block */    	
    BLOCK_PRIMARY_FNAME     VarChar(30)  NULL,	
    BLOCK_WHERE_FNAME       VarChar(30)  NULL,	
    BLOCK_TYPE_CODE         varchar(15)  NULL,

    PROP_SUBVIEW            VarChar(4000)          NULL,
    PROP_JOINTABLE          VarChar(4000)          NULL,
    PROP_VIEWS              VarChar(4000)          NULL,
    PROP_RUNTIME            VarChar(4000)          NULL,
    PROP_NAVIGATOR          VarChar(4000)          NULL,
    PROP_FOREING            VarChar(4000)          NULL,
    PROP_SEARCH             VarChar(4000)          NULL, 

    Constraint PK_MS_TABLES_IP primary key (IP_CODE)

      , CONSTRAINT FK_MS_TABLES_IP_MS_TABLES FOREIGN KEY (TABLE_CODE) 
        REFERENCES MS_TABLES (TABLE_CODE)

  )

 create index X_MS_TABLES_IP1 on MS_TABLES_IP (TABLE_CODE, IP_CODE)

 grant select, insert, update, delete on MS_TABLES_IP to public


commit transaction



-- alter table MS_TABLES_IP   add PROP_SEARCH             VarChar(4000)          NULL

-- alter table MS_TABLES_IP   add TABLEIPCODE     VarChar(100)        NULL

-- alter table MS_TABLES_IP   alter COLUMN NAVIGATOR     VarChar(2000)        NULL







