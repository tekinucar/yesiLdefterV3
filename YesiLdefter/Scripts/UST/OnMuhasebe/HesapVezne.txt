begin transaction

 create table HesapVezne
 (

   Id                Int IDENTITY(1,1) NOT NULL, 
   ParentId          Int       not null, /* default 0 */
   FirmId            Int       not null,
   IsActive          Bit       not null, /* default : 1 = active, 0 = not active */  
   VezneKodu         nVarchar(50)  null,
   VezneAdi          nVarchar(100) null, /* kullanıcının girdiği isim */

   constraint		pk_HesapVezne primary key (Id)
 )

 create index X_HesapVezne01 on HesapVezne (FirmId)
 
 grant select, insert, update, delete on HesapVezne to public


declare @FirmId int
set @FirmId = 7

INSERT INTO [dbo].[HesapVezne] ([ParentId],[FirmId],[IsActive],[VezneKodu],[VezneAdi]) 
  VALUES 
  (0, @FirmId, 1, '', 'A Veznesi'),
  (0, @FirmId, 1, '', 'B Veznesi')


 create table IVezneFinans
 (

   Id                Int IDENTITY(1,1) NOT NULL, 
   ParentId          Int       not null, /* default 0 */
   FirmId            Int       not null,
   IsActive          Bit       not null, /* default : 1 = active, 0 = not active */  
   FinansId          Int           null,
   VezneId           Int           null,

   constraint		pk_IVezneFinans primary key (Id)
 )

 create index X_IVezneFinans01 on IVezneFinans (FirmId)
 
 grant select, insert, update, delete on IVezneFinans to public



 create table IVezneKullanici
 (

   Id                Int IDENTITY(1,1) NOT NULL, 
   ParentId          Int       not null, /* default 0 */
   FirmId            Int       not null,
   IsActive          Bit       not null, /* default : 1 = active, 0 = not active */  
   KullaniciId       Int           null,
   VezneId           Int           null,
   SiraNo            SmallInt      null,

   constraint		pk_IVezneKullanici primary key (Id)
 )

 create index X_IVezneKullanici01 on IVezneKullanici (FirmId,KullaniciId)
 
 grant select, insert, update, delete on IVezneKullanici to public
 
 
commit transaction


