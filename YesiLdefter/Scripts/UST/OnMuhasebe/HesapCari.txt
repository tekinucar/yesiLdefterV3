


begin transaction

 create table HesapCari
 (

   Id                  Int IDENTITY(1,1) NOT NULL, /* Id  DİĞER TABLOLARDA CARI_ID OLUYOR  */
   ParentId            Int       not null, /* default 0 */
   FirmId              Int       not null,
   IsActive            Bit       not null, /* default : 1 = active, 0 = not active */  
   CariTipiId          SmallInt      null, /* 1. Gerçek Kişi, 2. Özel Firma, 3. Kamu Kurumu */
   CalismaTipiId       SmallInt      null, 
   
   TcVkNo              nVarchar(11)  null,
   TamAdi              nVarchar(200) null,
   CariHesapKodu       nVarchar(50)  null,
   CariKisaAdi         nVarchar(50)  null, /* nick Name, Kısa Adı */
   Adi                 nVarchar(50)  null,
   GobekAdi            nVarchar(50)  null,
   SoyAdi              nVarchar(50)  null,
   Unvani1             nVarchar(98)  null,
   Unvani2             nVarchar(98)  null,
   CepTelefonu         nVarchar(15)  null,
   CepTelefonu2        nVarchar(15)  null,
   Eposta              nVarchar(98)  null,

   FirmaTipiId         SmallInt      null, /* 1. Ltd, 2. Anonim, 3. Şahıs */ 
   KategoriTipiId      Int           null,
   SektorTipiId        Int           null,
   CalisanSayisiTipiId SmallInt      null,

   VergiNo             nVarchar(10)  null,
   VergiDairesiTipiId  nVarChar(5)   null, 
   
   ParaTipiId          nVarChar(3)   null,
   BorcDovizYeriId     SmallInt      null,
   AlacakDovizYeriId   SmallInt      null,
      
   KdvUygulanmaz       Bit           null,
   TevkifatUygulanmaz  Bit           null,
   EkVergiUygulanmaz   Bit           null,
   
   constraint  pk_HesapCari primary key (Id)
 )

 create index X_HesapCari01 on HesapCari (FirmId)
 create index X_HesapCari02 on HesapCari (CariTipiId)
 create index X_HesapCari03 on HesapCari (CalismaTipiId)
 create index X_HesapCari04 on HesapCari (TcVkNo)
 create index X_HesapCari05 on HesapCari (TamAdi)
 create index X_HesapCari06 on HesapCari (FirmaTipiId)
 create index X_HesapCari07 on HesapCari (KategoriTipiId)
 create index X_HesapCari08 on HesapCari (SektorTipiId)
 create index X_HesapCari09 on HesapCari (CalisanSayisiTipiId)

 grant select, insert, update, delete on HesapCari to public


-- ------------------------------------------------------- 
-- CariTipiId
-- ------------------------------------------------------- 
create table [Lkp].[HesapCariCariTipi]
(
   Id          Int Unique Not Null,
   CariTipi    nVarchar(50)   null,
   GrupTipiId  SmallInt       null,
   
   constraint  pk_HesapCariCariTipi primary key (Id)
)

INSERT INTO [Lkp].[HesapCariCariTipi] (Id, CariTipi, GrupTipiId)
 VALUES 
  (0, N'Tanımsız',    0),
  (1, N'Gerçek Kişi',    1),
  (2, N'Özel Firma',  1),
  (3, N'Kamu Kurumu', 1),
  (4, N'CariPersoneli', 1)
  
-- ------------------------------------------------------- 
-- CalismaTipiId 
-- ------------------------------------------------------- 
create table [Lkp].[HesapCariCalismaTipi]
(
   Id           Int        Not Null,
   CalismaTipi  nVarchar(50)   null,
   GrupTipiId   SmallInt       null,
   IsMaster     Bit            null
)

INSERT INTO [Lkp].[HesapCariCalismaTipi] (Id, CalismaTipi, GrupTipiId, IsMaster)
 VALUES 
  (11, N'Müşteri',   1, 1),
  (12, N'Tedarikci', 1, 1),
  (13, N'Bayi',      1, 1),
  (19, N'Personel',  1, 1),
  (11, N'Müşteri',   2, 0),
  (12, N'Tedarikci', 2, 0),
  (13, N'Bayi',      2, 0),
  
  (21, N'Personel',  121, 1),
  (22, N'Hükümlü',   121, 1)


  
 
 create table CariIO
 (

   Id                Int IDENTITY(1,1) NOT NULL, 
   FirmId            Int       not null,
   IsActive          Bit       not null, /* default : 1 = active, 0 = not active */  
   IsCancel          Bit           null,

   CariId            Int           null, 
   DosyaNo           nVarchar(30)  null,

   BlokId            Int           null,
   KatId             Int           null,
   DaireId           Int           null,

   DepartmanId       Int           null,
   BolumId           Int           null, 
   GorevId           Int           null,

   GirisTarihi       Date          null,
   CikisTarihi       Date          null,
   CikisTipiId       SmallInt      null,

   GirisEylemPlaniId Int           null,
   CikisEylemPlaniId Int           null,
   GirisCihazKaydiId Int           null, 
   CikisCihazKaydiId Int           null,
   
   --Aciklama          nVarchar(200) null, gerekince aç
   
   constraint		pk_CariIO primary key (Id)
 )

 create index X_CariIO01 on CariIO (FirmId,CariId)
 create index X_CariIO03 on CariIO (FirmId,BlokId)
 create index X_CariIO04 on CariIO (FirmId,KatId)
 create index X_CariIO05 on CariIO (FirmId,DaireId)
 create index X_CariIO06 on CariIO (FirmId,DepartmanId)
 create index X_CariIO07 on CariIO (FirmId,BolumId)
 create index X_CariIO08 on CariIO (FirmId,GorevId)
 
 grant select, insert, update, delete on CariIO to public

-- ------------------------------------------------------- 
-- CikisTipiId
-- ------------------------------------------------------- 
create table [Lkp].[CariIOCikisTipi]
(
   Id          Int Unique Not Null,
   CikisTipi   nVarchar(50)   null,
   GrupTipiId  SmallInt       null,
   
   constraint  pk_CariIOCikisTipi primary key (Id)
)

INSERT INTO [Lkp].[CariIOCikisTipi] (Id, CikisTipi, GrupTipiId)
 VALUES 
  (0, N'Tanımsız',    0),
  (1, N'Tahliye',     1),
  (2, N'Sevk/Nakil',  1)



 create table CariBio
 (
   Id                Int IDENTITY(1,1) NOT NULL, 
   FirmId            Int       not null,
   IsActive          Bit       not null, /* default : 1 = active, 0 = not active */  
   CariId            Int           null, 
   BioTipiId         SmallInt      null, /* 1 : fingerPrint  */
   BioIndex          SmallInt      null, /* sıra no */
   BioPrint          nVarChar(max) null, /* bio datası */
   BioDate           Date          null,
   
   constraint		pk_CariBio primary key (Id)
 )

 create index X_CariBio01 on CariBio (FirmId,CariId)
 create index X_CariBio02 on CariBio (FirmId,BioDate)
 
 grant select, insert, update, delete on CariBio to public






 


-- CariHesapKimlik
-- CariHesapAdres
-- CariHesapIletisim






commit transaction
