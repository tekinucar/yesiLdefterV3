/*CreateTable*/

begin transaction

 create table MtskAdayTakip
 (
   Id                    Int IDENTITY(1,1) not null, 
   FirmId                Int       not null,
   TalepId               Int       not null, 
   AdayId                Int       not null, 

 --*  DonemTipiId           Int           null,
 --*  GrupTipiId            SmallInt      null, /* trg_MtskAday */
 --*  SubeTipiId            SmallInt      null, /* trg_MtskAday */

   --10 kayıt aşaması
 --*  TalepTipiId            SmallInt     null, /* 1. sertifika, 2. (2.+4 hak), 3. Nakil 2.+4hak, 4. 100Ceza, 5. Özel Uyg Ders   */ 
 --*  KayitTipiId            SmallInt     null, /* trg_MtskAday : 1. Ön kayıt, 2. Kayıt aşamasında, 3. Kesin Kayıt ...  */ 
   ZamanlamaTipiId        SmallInt     null, /* detay aşağıda */
   IsGrupSubeYok          Bit          null, /* grup veya şubesi belli değilse  */
   IsEgitimDevamEdiyor    Bit          null, /* eğitim devam edenler = 1, değilse = 0 : sorgularda kolaylık olsun diye var  */ 
 --*  MebbisKurumOnayi       Bit          null, /* trg_MtskAday : 0-Onaysız, 1-Onaylandı */	
 --*  MebbisDurumTipiId      SmallInt     null, /* trg_MtskAday :  detay aşağıda */
   YasOnayiTipiId         SmallInt     null, /* 1-Yaşı Tutmuyor, 2-Yaş için bekleme süresi doldu,  3. Diğer sebeplerle onaylı */
   YasHazirTarihi         Date         null, /* yaş sınırını dolduğu tarih */
   OzurDurumuTipiId       SmallInt     null, /* MtskAdaySaglik tan gelecek bilgi  */

   -- 30
   BelgelerGeldi          Bit          null, /* tamamı geldiyse */
   BelgelerTarandi        Bit          null, /* tamamı tarandıysa */
   BelgelerYuklendi       Bit          null, /* tamamı yüklendiyse */
   EgitimSureciTipiId     SmallInt     null, /* detay aşağıda */

   -- 40 ödemeleri
   BorcDurumuTipiId         SmallInt     null,
   
   --100 eSınav aşaması
   TeorikBaslamaTarihi    Date         null,
   ToerikBitisTarihi      Date         null,
   TeorikDersToplami      SmallInt     null,
   TeorikDersTipiId       SmallInt     null,--104
   
   --110
   eSinavNo               SmallInt     null, --111
   eSinavDurumTipiId      SmallInt     null,
   eSinavSonucTipiId      SmallInt     null, /* Başarılı, Başarısız, Girmedi */
   eSinavSonrasiTipiId    SmallInt     null, 
   OnBesGunBitisTarihi    Date         null, 
   eSinavUcretTipiId      SmallInt     null, /* kendisi yatıracak, biz yatıracağız */
   eSinavDetayId          Int          null, /* en son hangi sınavsa onun id si. sınav1 ise sınav1 in id si, 2 ise 2 nin id si, 3, 4 ... */
   eSinavBasariTarihi     Date         null,
   
   --200 uygulama ders + Sınav aşaması
   UygulamaBaslamaTarihi  Date         null,
   UygulamaBitisTarihi    Date         null,
   SimulatorDersToplami   SmallInt     null,
   AkanTrafikDersToplami  SmallInt     null, /* prc_MtskUygulamaDersPlaniSaatleriGuncelle  içinde hesplanıyor */
   UygulamaliDersToplami  SmallInt     null, /* prc_MtskUygulamaDersPlaniSaatleriGuncelle  içinde hesplanıyor */
   UygulamaliDersTipiId   SmallInt     null,

   --210
   BasarisizBaslamaTarihi Date         null,
   BasarisizBitisTarihi   Date         null,
   BasarisizDersToplami   SmallInt     null,
   BasarisizDersTipiId    SmallInt     null,
   
   --220
   Arti4BaslamaTarihi     Date         null,
   Arti4BitisTarihi       Date         null,
   Arti4DersToplami       SmallInt     null, /* prc_MtskUygulamaDersPlaniSaatleriGuncelle  içinde hesplanıyor */
   Arti4DersTipiId        SmallInt     null,
   
   --230
   uSinavaKatilabilir      Bit          null,
   uRandevuMebbisAktarildi Bit          null, 
   uSinavNo                SmallInt     null,
   uSinavDurumTipiId       SmallInt     null,
   uSinavSonucTipiId       SmallInt     null, /* Başarılı, Başarısız, Girmedi */
   uSinavSonrasiTipiId     SmallInt     null, 
   uSinavUcretTipiId       SmallInt     null, /* kendisi yatıracak, biz yatıracağız */
   uSinavDetayId           Int          null, /* en son hangi sınavsa onun id si. sınav1 ise sınav1 in id si, 2 ise 2 nin id si, 3, 4 ... */
   uSinavBasariTarihi      Date         null,
   
   --300 sertifika aşaması
   SertifikaDurumTipiId    SmallInt     null,
   SertifikaTarihi         Date         null,
   DosyaYakti              Bit          null, -- false/true
   
   constraint		pk_MtskAdayTakip primary key (Id)
 )
  
 grant select, insert, update, delete on MtskAdayTakip to public

 create index X_MtskAdayTakip01 on MtskAdayTakip (TalepId)
 create index X_MtskAdayTakip02 on MtskAdayTakip (AdayId)
 create index X_MtskAdayTakip03 on MtskAdayTakip (DonemTipiId,GrupTipiId,SubeTipiId)
   
commit transaction

/*CreateTableEnd*/


/* Tablonun her aday için gerekli olan satırı :  trg_MtskAday içinde insert ediliyor   */


/*CreateLkpTable*/

begin transaction


-- ------------------------------------------------------- 
-- TalepTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipTalepTipi')
drop table [Lkp].[MtskAdayTakipTalepTipi]

create table [Lkp].[MtskAdayTakipTalepTipi]
(
   Id               Int Unique not null, 
   TalepTipi        nVarchar(50)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption     nVarchar(20)   null,
   FormCaption      nVarchar(15)   null,
   
   constraint  pk_MtskAdayTakipTalepTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipTalepTipi]
INSERT INTO [Lkp].[MtskAdayTakipTalepTipi] (Id, TalepTipi, KonuGrupId, KonuId, KonuCaption, ChartCaption, FormCaption)
 VALUES 
  ( 1,    N'Sertifika',             1, 1111, 'Talep tipi', '', 'Yeni aday'),
  ( 2,    N'2.+4 hak ',             1, 1112, 'Talep tipi', '', ''),
  ( 3,    N'Nakil 2.+4 hak',        1, 1113, 'Talep tipi', '', ''),
  ( 4,    N'100 Ceza',              1, 1114, 'Talep tipi', '', ''),
  ( 5,    N'Özel direksiyon dersi', 1, 1115, 'Talep tipi', '', ''),
  ( 6,    N'Özel teorik dersi',     1, 1116, 'Talep tipi', '', '')



-- ------------------------------------------------------- 
-- KayitTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipKayitTipi')
drop table [Lkp].[MtskAdayTakipKayitTipi]

create table [Lkp].[MtskAdayTakipKayitTipi]
(
   Id               Int Unique not null, 
   KayitTipi        nVarchar(30)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption     nVarchar(20)   null,
   FormCaption      nVarchar(15)   null,

   constraint  pk_MtskAdayTakipKayitTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipKayitTipi]
INSERT INTO [Lkp].[MtskAdayTakipKayitTipi] (Id, KayitTipi, KonuGrupId, KonuId, KonuCaption, ChartCaption, FormCaption)
 VALUES 
  ( 1,    N'Ön kayıt',          1, 1121, 'Kayıt durumu',  'Ön kayıt',     'Yeni Aday' ),
  ( 2,    N'Kayıt aşamasında',  1, 1122, 'Kayıt durumu',  'K.Aşamasında', 'Mebbise bağlan' ),
  ( 3,    N'Kesin kayıt',       1, 1123, 'Kayıt durumu',  'Kesin kay.', '' )


-- ------------------------------------------------------- 
-- ZamanlamaTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipZamanlamaTipi')
drop table [Lkp].[MtskAdayTakipZamanlamaTipi]

create table [Lkp].[MtskAdayTakipZamanlamaTipi]
(
   Id               Int Unique not null, 
   ZamanlamaTipi    nVarchar(30)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption     nVarchar(20)   null,
   FormCaption      nVarchar(15)   null,
   
   constraint  pk_MtskAdayTakipZamanlamaTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipZamanlamaTipi]
INSERT INTO [Lkp].[MtskAdayTakipZamanlamaTipi] (Id, ZamanlamaTipi, KonuGrupId, KonuId, KonuCaption, ChartCaption, FormCaption)
 VALUES 
  ( 0,  N'Belirsiz',                 1, 1130, 'Zamanlama',  '', '' ),
  ( 1,  N'Geçmiş dönem devam eden',  1, 1131, 'Zamanlama',  '', '' ),
  ( 2,  N'Bu dönem',                 1, 1132, 'Zamanlama',  '', '' ),
  ( 3,  N'Gelecek ay',               1, 1133, 'Zamanlama',  '', '' ),
  ( 4,  N'İleriki dönemler',         1, 1134, 'Zamanlama',  '', '' )



-- ------------------------------------------------------- 
-- GrupSubeTipiId -- bu field MtskAdayTakip tablosunda yok
-- bazı koşulları takip için var
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipGrupSubeTipi')
drop table [Lkp].[MtskAdayTakipGrupSubeTipi]

create table [Lkp].[MtskAdayTakipGrupSubeTipi]
(
   Id               Int Unique not null, 
   GrupSubeTipi     nVarchar(50)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption     nVarchar(20)   null,
   FormCaption      nVarchar(15)   null,
   
   constraint  pk_MtskAdayTakipGrupSubeTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipGrupSubeTipi]
INSERT INTO [Lkp].[MtskAdayTakipGrupSubeTipi] (Id, GrupSubeTipi, KonuGrupId, KonuId, KonuCaption, ChartCaption, FormCaption)
 VALUES 
  ( 1,  N'Grup veya şubesi belli olmayan adaylar',   1, 1141, 'Grup ve şube',  '', '' )


-- ------------------------------------------------------- 
-- MebbisOnayiTipiId -- bu field MtskAdayTakip tablosunda yok
-- bazı koşulları takip için var
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipMebbisOnayiTipi')
drop table [Lkp].[MtskAdayTakipMebbisOnayiTipi]

create table [Lkp].[MtskAdayTakipMebbisOnayiTipi]
(
   Id                Int Unique not null, 
   MebbisOnayiTipi   nVarchar(50)   null,
   KonuGrupId        SmallInt       null,
   KonuId            Int            null,
   KonuCaption       nVarchar(20)   null,
   ChartCaption      nVarchar(20)   null,
   FormCaption       nVarchar(15)   null,
   
   constraint  pk_MtskAdayTakipMebbisOnayiTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipMebbisOnayiTipi]
INSERT INTO [Lkp].[MtskAdayTakipMebbisOnayiTipi] (Id, MebbisOnayiTipi, KonuGrupId, KonuId, KonuCaption, ChartCaption, FormCaption)
 VALUES 
  ( 0,  N'Onaysız',        1, 1161, 'Mebbis kurum onayı',  '', 'Mebbis"e bağlan' ),
  ( 1,  N'Onaylandı',      1, 1162, 'Mebbis kurum onayı',  '', '' )



-- ------------------------------------------------------- 
-- MebbisDurumTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipMebbisDurumTipi')
drop table [Lkp].[MtskAdayTakipMebbisDurumTipi]

create table [Lkp].[MtskAdayTakipMebbisDurumTipi]
(
   Id               Int Unique not null, 
   MebbisDurumTipi  nVarchar(70)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption     nVarchar(20)   null,
   FormCaption      nVarchar(15)   null,
   
   constraint  pk_MtskAdayTakipMebbisDurumTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipMebbisDurumTipi]
INSERT INTO [Lkp].[MtskAdayTakipMebbisDurumTipi] (Id, MebbisDurumTipi, KonuGrupId, KonuId, KonuCaption, ChartCaption, FormCaption)
 VALUES 
  (-1,  N'Belirsiz',                     1, 1169, 'Mebbis durumu',  '', ''  ),
  ( 0,  N'Kursa Başvuru Aşamasında',     1, 1170, 'Mebbis durumu',  '', ''  ),
  ( 1,  N'Teorik Sınav Aşamasında',      1, 1171, 'Mebbis durumu',  '', ''  ),
  ( 2,  N'Uygulama Sınav Aşamasında',    1, 1172, 'Mebbis durumu',  '', ''  ),
  ( 3,  N'Teorik Sınav Hakkı Doldu',     1, 1173, 'Mebbis durumu',  '', ''  ),
  ( 4,  N'Uygulama Sınav Hakkı Doldu',   1, 1174, 'Mebbis durumu',  '', ''  ),
  ( 5,  N'Sertifika Almaya Hak Kazandı', 1, 1175, 'Mebbis durumu',  '', ''  ),
  ( 6,  N'Sertifikası İptal Edildi',     1, 1176, 'Mebbis durumu',  '', ''  ),
  ( 7,  N'e-Sınav Aşamasında',           1, 1177, 'Mebbis durumu',  '', ''  ),
  ( 8,  N'e-Sınav Test Aşamasında',      1, 1178, 'Mebbis durumu',  '', ''  ),
  ( 9,  N'e-Sınavdan Başarısız Oldu',    1, 1179, 'Mebbis durumu',  '', ''  ),
  ( 10,  N'e-Sınav Hakkı Doldu',         1, 1180, 'Mebbis durumu',  '', ''  ),
  ( 11,  N'Kaydı Silindi',               1, 1181, 'Mebbis durumu',  '', ''  ),
  ( 12,  N'Ceza Kaydı Var',              1, 1182, 'Mebbis durumu',  '', ''  ),
  ( 13,  N'Teorik Dersten Muaf',         1, 1183, 'Mebbis durumu',  '', ''  ),
  ( 14,  N'Adli Sicil Kaydı Uygun Olmadığından Dönem Kaydı Durdurulmuştur.', 1, 1184, 'Mebbis durumu',  '', ''  ),
  ( 22,  N'2.Direksiyon Aşamasında',     1, 1185, 'Mebbis durumu',  '', ''  )



-- ------------------------------------------------------- 
-- YasOnayiTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipYasOnayiTipi')
drop table [Lkp].[MtskAdayTakipTalepTipi]

create table [Lkp].[MtskAdayTakipYasOnayiTipi]
(
   Id               Int Unique not null, 
   YasOnayiTipi     nVarchar(50)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption     nVarchar(20)   null,
   FormCaption      nVarchar(15)   null,
   
   constraint  pk_MtskAdayTakipYasOnayiTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipYasOnayiTipi]
INSERT INTO [Lkp].[MtskAdayTakipYasOnayiTipi] (Id, YasOnayiTipi, KonuGrupId, KonuId, KonuCaption, ChartCaption, FormCaption)
 VALUES 
  --( 0,    N'Yaşı tutuyor',                  1, 1210, 'Yaş onayı', '', ''),
  ( 1,    N'Yaşı tutmuyor',                 1, 1211, 'Yaş onayı', '', ''),
  ( 2,    N'Yaş için bekleme süresi doldu', 1, 1212, 'Yaş onayı', '', ''),
  ( 3,    N'Muhafiyetle onaylı',            1, 1213, 'Yaş onayı', '', ''),
  ( 4,    N'Doğum tarihi yok, belirsiz',    1, 1214, 'Yaş onayı', '', '')



-- ------------------------------------------------------- 
-- OzurDurumuTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipOzurDurumuTipi')
drop table [Lkp].[MtskAdayTakipOzurDurumuTipi]

create table [Lkp].[MtskAdayTakipOzurDurumuTipi]
(
   Id               Int Unique Not    null,
   OzurDurumuTipi   nVarchar(60)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption     nVarchar(20)   null,
   FormCaption      nVarchar(15)   null,

   constraint  pk_MtskAdayTakipOzurDurumuTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipOzurDurumuTipi]
INSERT INTO [Lkp].[MtskAdayTakipOzurDurumuTipi] (Id, OzurDurumuTipi, KonuGrupId, KonuId, KonuCaption, ChartCaption, FormCaption)
 VALUES 
  --(  0, N'Belirsiz', 1, 1220, 'Sağlık durumu', '', ''),
  --(  1, N'Engeli Yok', 1, 1221, 'Sağlık durumu', '', ''),
  (100, N'Ortopedik Engelli (Ellerini ve/veya Kollarını Kullanamıyor)', 1, 1222, 'Sağlık durumu', '', ''),
  (110, N'Ortopedik Engelli (Yürüyemiyor)', 1, 1223, 'Sağlık durumu', '', ''),
  (120, N'İşitme, Dil veya Konuşma Engelli', 1, 1224, 'Sağlık durumu', '', ''),
  (140, N'Görme Engelli (Bir Gözü Görmüyor)', 1, 1225, 'Sağlık durumu', '', ''),
  (150, N'Görme Engelli (Büyüteç Yardımı İle Görebiliyor)', 1, 1226, 'Sağlık durumu', '', ''),
  (160, N'Süreğen hastalığı var.', 1, 1227, 'Sağlık durumu', '', '')


-- ------------------------------------------------------- 
-- BelgelerTipiId -- bu field MtskAdayTakip tablosunda yok
-- bazı koşulları takip için var
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipBelgelerTipi')
drop table [Lkp].[MtskAdayTakipBelgelerTipi]

create table [Lkp].[MtskAdayTakipBelgelerTipi]
(
   Id                Int Unique not null, 
   BelgelerTipi      nVarchar(50)   null,
   KonuGrupId        SmallInt       null,
   KonuId            Int            null,
   KonuCaption       nVarchar(20)   null,
   ChartCaption      nVarchar(20)   null,
   FormCaption       nVarchar(15)   null,
   
   constraint  pk_MtskAdayTakipBelgelerTipi primary key (Id)
)
-- ------------------------------------------------------- 
-- 1231  BelgelerGeldi         /* tamamı geldiyse */
-- 1232  BelgelerTarandi       /* tamamı tarandıysa */
-- 1233  BelgelerYuklendi      /* tamamı yüklendiyse */
-- ------------------------------------------------------- 

Delete from [Lkp].[MtskAdayTakipBelgelerTipi]
INSERT INTO [Lkp].[MtskAdayTakipBelgelerTipi] (Id, BelgelerTipi, KonuGrupId, KonuId, KonuCaption, ChartCaption, FormCaption)
 VALUES 
  ( 1,  N'Belgeleri eksik olanlar',         1, 1231, 'Belgeler',  '', '' ),
  ( 2,  N'Belgeleri taranmayan',            1, 1232, 'Belgeler',  '', '' ),
  ( 3,  N'Belgeleri Mebbis"e yüklenmeyen',  1, 1233, 'Belgeler',  '', '' )




-- ------------------------------------------------------- 
-- EgitimSureciTipiId : 1260
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipEgitimSureciTipi')
drop table [Lkp].[MtskAdayTakipEgitimSureciTipi]

create table [Lkp].[MtskAdayTakipEgitimSureciTipi]
(
   Id               Int Unique not null, 
   EgitimSureciTipi nVarchar(50)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption     nVarchar(20)   null,
   FormCaption      nVarchar(15)   null,

   constraint  pk_MtskAdayTakipEgitimSureciTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipEgitimSureciTipi]
INSERT INTO [Lkp].[MtskAdayTakipEgitimSureciTipi] (Id, EgitimSureciTipi, KonuGrupId, KonuId, KonuCaption, ChartCaption, FormCaption)
 VALUES 
  ( 0,    N'Belirsiz',                                1, 1260, 'Eğitim süreci', '', '' ),
  ( 1,    N'Eğitimleri başlamadı',                    1, 1261, 'Eğitim süreci', '', '' ),
  ( 2,    N'Eğitimleri ve sınavları devam ediyor',    1, 1262, 'Eğitim süreci', '', '' ),
  ( 3,    N'Sertifikayı hak kazandı',                 1, 1263, 'Eğitim süreci', '', '' ),
  ( 4,    N'Dosya yaktı',                             1, 1264, 'Eğitim süreci', '', '' ), /* esınav veya uyg sınavları başarısız oldu */
  ( 5,    N'Kendi isteğiyle ayrıldı, kayıt sildirdi', 1, 1264, 'Eğitim süreci', '', '' )





-- ------------------------------------------------------- 
-- SertifikaUcretTipiId ipta
-- BorcDurumuTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipBorcDurumuTipi')
drop table [Lkp].[MtskAdayTakipBorcDurumuTipi]

create table [Lkp].[MtskAdayTakipBorcDurumuTipi]
(
   Id                 Int Unique not null, 
   BorcDurumuTipi     nVarchar(50)   null
   KonuGrupId       SmallInt       null, 
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   
   constraint  pk_MtskAdayTakipBorcDurumuTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipBorcDurumuTipi]
INSERT INTO [Lkp].[MtskAdayTakipBorcDurumuTipi] (Id, BorcDurumuTipi)
 VALUES 
  ( 0,    N'Hiç ödemesi yok'),
  ( 1,    N'Kısmi ödemesi var'),
  ( 2,    N'Gecikmiş ödemesi var'),
  ( 3,    N'Tamamı tahsil edildi'),
  ( 4,    N'Ücretsiz')


/* ***************************************************************************** */
-- Teorik Ders ve e-Sınavlar
/* ***************************************************************************** */

-- ------------------------------------------------------- 
-- TeorikDersTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipTeorikDersTipi')
drop table [Lkp].[MtskAdayTakipTeorikDersTipi]

create table [Lkp].[MtskAdayTakipTeorikDersTipi]
(
   Id               Int Unique not null, 
   TeorikDersTipi   nVarchar(50)   null
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   
   constraint  pk_MtskAdayTakipTeorikDersTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipTeorikDersTipi]
INSERT INTO [Lkp].[MtskAdayTakipTeorikDersTipi] (Id, TeorikDersTipi)
 VALUES 
  ( 0,    N''),
  ( 1,    N'Teorik ders başlamadı'),
  ( 2,    N'Teorik ders alıyor'),
  ( 3,    N'Teorik dersleri tamamladı'),
  ( 4,    N'Muaf')

-- ------------------------------------------------------- 
-- eSinavDurumTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipeSinavDurumTipi')
drop table [Lkp].[MtskAdayTakipeSinavDurumTipi]

create table [Lkp].[MtskAdayTakipeSinavDurumTipi]
(
   Id               Int Unique not null, 
   eSinavDurumTipi  nVarchar(50)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption     nVarchar(20)   null,
   FormCaption      nVarchar(15)   null,
   
   constraint  pk_MtskAdayTakipeSinavDurumTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipeSinavDurumTipi]
INSERT INTO [Lkp].[MtskAdayTakipeSinavDurumTipi] (Id, eSinavDurumTipi, ChartCaption, FormCaption)
 VALUES 
  ( 0,    N'', '', ''),
  ( 1,    N'e-Sınav için hazır değil',    'Hazır değil', '' ),
  ( 2,    N'e-Sınav başvurusu yapılacak', 'Başvuru yapılacak', 'Mebbis' ),
  ( 3,    N'e-Sınav başvurusu yapıldı',   'Başvuru yapıldı', '' ),
  ( 4,    N'e-Sınav sonucu okunacak',     'Sınav okunacak', 'Mebbis.' ),
  ( 5,    N'e-Sınav sonucu okundu',       'Sınav okundu', '' ),
  ( 6,    N'Muaf',                        'Muaf', '' )


-- ------------------------------------------------------- 
-- eSinavSonucTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipeSinavSonucTipi')
drop table [Lkp].[MtskAdayTakipeSinavSonucTipi]

create table [Lkp].[MtskAdayTakipeSinavSonucTipi]
(
   Id               Int Unique not null, 
   eSinavSonucTipi  nVarchar(50)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption     nVarchar(20)   null,
   FormCaption      nVarchar(15)   null,
   
   constraint  pk_MtskAdayTakipeSinavSonucTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipeSinavSonucTipi]
INSERT INTO [Lkp].[MtskAdayTakipeSinavSonucTipi] (Id, eSinavSonucTipi, ChartCaption, FormCaption)
 VALUES 
  ( 0,    N'', '', '' ),
  ( 1,    N'Başarılı', 'Başarılı', '' ),
  ( 2,    N'Başarısız', 'Başarısız', '' ),
  ( 3,    N'Girmedi', 'Girmedi', '')

-- ------------------------------------------------------- 
-- eSinavSonrasiTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipeSinavSonrasiTipi')
drop table [Lkp].[MtskAdayTakipeSinavSonrasiTipi]

create table [Lkp].[MtskAdayTakipeSinavSonrasiTipi]
(
   Id               Int Unique not null, 
   eSinavSonrasiTipi  nVarchar(50)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption       nVarchar(20)   null,
   FormCaption        nVarchar(15)   null,   

   constraint  pk_MtskAdayTakipeSinavSonrasıTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipeSinavSonrasiTipi]
INSERT INTO [Lkp].[MtskAdayTakipeSinavSonrasiTipi] (Id, eSinavSonrasiTipi, ChartCaption, FormCaption)
 VALUES 
  ( 0,    N'', '', '' ),
  ( 1,    N'15 günlük beklemede',      '15 Gün', '' ),
  ( 2,    N'Uygulama aşamasına geçti', 'Uyg. aşama. geçti', '' ),
  ( 3,    N'Tüm e-Sınav hakkı bitti',  'Sınav hakkı bitti', '' )


-- ------------------------------------------------------- 
-- eSinavUcretTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipeSinavUcretTipi')
drop table [Lkp].[MtskAdayTakipeSinavUcretTipi]

create table [Lkp].[MtskAdayTakipeSinavUcretTipi]
(
   Id               Int Unique not null, 
   eSinavUcretTipi  nVarchar(50)   null
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   
   constraint  pk_MtskAdayTakipeSinavUcretTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipeSinavUcretTipi]
INSERT INTO [Lkp].[MtskAdayTakipeSinavUcretTipi] (Id, eSinavUcretTipi)
 VALUES 
  ( 0,    N'Adayın kendisi yatıracak'),
  ( 1,    N'Biz yatıracağız')

/* ***************************************************************************** */
-- Uygulamalı Ders ve Sınavlar
/* ***************************************************************************** */

-- ------------------------------------------------------- 
-- UygulamaliDersTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipUygulamaliDersTipi')
drop table [Lkp].[MtskAdayTakipUygulamaliDersTipi]

create table [Lkp].[MtskAdayTakipUygulamaliDersTipi]
(
   Id                  Int Unique not null, 
   UygulamaliDersTipi  nVarchar(50)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption        nVarchar(20)   null,
   FormCaption         nVarchar(15)   null,   
   
   constraint  pk_MtskAdayTakipUygulamaliDersTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipUygulamaliDersTipi]
INSERT INTO [Lkp].[MtskAdayTakipUygulamaliDersTipi] (Id, UygulamaliDersTipi, ChartCaption, FormCaption)
 VALUES 
  ( 0,    N'', '', '' ),
  ( 1,    N'Uygulamalı dersler planlanacak', 'Planlanacak', 'Planlama' ),
  ( 2,    N'Uygulamalı dersler planlandı',   'Planlandı', 'Mebbis' ),
  ( 3,    N'Uygulamalı dersleri alıyor',     'Ders alıyor', '' ),
  ( 4,    N'Uygulamalı dersleri tamamladı',  'Ders tamamlandı', '' )


-- ------------------------------------------------------- 
-- BasarisizDersTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipBasarisizDersTipi')
drop table [Lkp].[MtskAdayTakipBasarisizDersTipi]

create table [Lkp].[MtskAdayTakipBasarisizDersTipi]
(
   Id                  Int Unique not null, 
   BasarisizDersTipi   nVarchar(50)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption        nVarchar(20)   null,
   FormCaption         nVarchar(15)   null,   
   
   constraint  pk_MtskAdayTakipBasarisizDersTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipBasarisizDersTipi]
INSERT INTO [Lkp].[MtskAdayTakipBasarisizDersTipi] (Id, BasarisizDersTipi, ChartCaption, FormCaption)
 VALUES 
  ( 0,    N'', '', ''),
  ( 1,    N'2 saat başarısız aday eğitimi planlanacak', '2 saat planlanacak', 'Planlama.' ),
  ( 2,    N'2 saat başarısız aday eğitimi planlandı',   '2 saat planlandı', 'Mebbis.' ),
  ( 3,    N'2 saat başarısız aday eğitimi alıyor',      '2 saat eğitim alıyor', '' ),
  ( 4,    N'2 saat başarısız aday eğitimi tamamlandı',  '2 saat eğitim tamam', '' ),
  ( 5,    N'Eğitime gerek yok (Sınava girmedi)',        'Sınava girmedi', '' )


-- ------------------------------------------------------- 
-- Arti4DersTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipArti4DersTipi')
drop table [Lkp].[MtskAdayTakipArti4DersTipi]

create table [Lkp].[MtskAdayTakipArti4DersTipi]
(
   Id              Int Unique not null, 
   Arti4DersTipi   nVarchar(50)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption    nVarchar(20)   null,
   FormCaption     nVarchar(15)   null,   
   
   constraint  pk_MtskAdayTakipArti4DersTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipArti4DersTipi]
INSERT INTO [Lkp].[MtskAdayTakipArti4DersTipi] (Id, Arti4DersTipi, ChartCaption, FormCaption)
 VALUES 
  ( 0,    N'', '', ''),
  ( 1,    N'2.Uygulama (+4) için ders planlanacak', '+4 planlanacak', 'Planlama' ),
  ( 2,    N'2.Uygulama (+4) için ders planlandı',   '+4 planlandı', 'Mebbis' ),
  ( 3,    N'2.Uygulama (+4) derslerini alıyor',     '+4 alıyor', '' ),
  ( 4,    N'2.Uygulama (+4) dersleri tamamlandı',   '+4 tamamlandı', '' )


-- ------------------------------------------------------- 
-- uSinavDurumTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipuSinavDurumTipi')
drop table [Lkp].[MtskAdayTakipuSinavDurumTipi]

create table [Lkp].[MtskAdayTakipuSinavDurumTipi]
(
   Id               Int Unique not null, 
   uSinavDurumTipi  nVarchar(60)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption     nVarchar(25)   null,
   FormCaption      nVarchar(15)   null,   
      
   constraint  pk_MtskAdayTakipuSinavDurumTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipuSinavDurumTipi]
INSERT INTO [Lkp].[MtskAdayTakipuSinavDurumTipi] (Id, uSinavDurumTipi, ChartCaption, FormCaption)
 VALUES 
  ( 0,    N'', '', '' ),
  ( 1,    N'Uygulama sınav için hazır değil',              'Uyg.hazır değil', '' ),
  ( 2,    N'Uygulama sınav için MEBBİS de onaylanacak',    'Mebbisde onaylanacak', 'Mebbis' ),
  ( 3,    N'Uygulama sınav randevusu planlanacak',         'Randevu planlanacak', 'Planlama' ),
  ( 4,    N'Uygulama sınav randevusu MEBBİSe aktarılacak', 'Randevu mebbise aktar', 'Mebbis.' ),
  ( 5,    N'Uygulama sınavına girecek',                    'Sınava girecek', '' ),
  ( 6,    N'Uygulama sınav sonucu okunacak',               'Sonuç okunacak', 'Mebbis..' ),
  ( 7,    N'Uygulama sınav sonucu okundu',                 'Sonuç okundu', '' ),
  
  ( 11,   N'2.Uygulama (+4) sınav için hazır değil',              '+4 hazır değil', '' ),
  ( 13,   N'2.Uygulama (+4) sınav randevusu planlanacak',         '+4 rand.planlanacak', 'Planlama.' ),
  ( 14,   N'2.Uygulama (+4) sınav randevusu MEBBİSe aktarılacak', '+4 Mebbise aktar', 'Mebbis...' ),
  ( 15,   N'2.Uygulama (+4) sınavına girecek',                    '+4 sınava girecek', '' ),
  ( 16,   N'2.Uygulama (+4) sınav sonucu okunacak',               '+4 sınav okunacak', 'Mebbis....' ),
  ( 17,   N'2.Uygulama (+4) sınav sonucu okundu',                 '+4 sınav okundu', '' )
  
-- ------------------------------------------------------- 
-- uSinavSonucTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipuSinavSonucTipi')
drop table [Lkp].[MtskAdayTakipuSinavSonucTipi]

create table [Lkp].[MtskAdayTakipuSinavSonucTipi]
(
   Id               Int Unique not null, 
   uSinavSonucTipi  nVarchar(50)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption     nVarchar(20)   null,
   FormCaption      nVarchar(15)   null,   
   
   constraint  pk_MtskAdayTakipuSinavSonucTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipuSinavSonucTipi]
INSERT INTO [Lkp].[MtskAdayTakipuSinavSonucTipi] (Id, uSinavSonucTipi, ChartCaption, FormCaption)
 VALUES 
  ( 0,    N'', '' ,'' ),
  ( 1,    N'Başarılı',  'Başarılı' ,'' ),
  ( 2,    N'Başarısız', 'Başarısız' ,'' ),
  ( 3,    N'Girmedi',   'Girmedi' ,'' )
  
-- ------------------------------------------------------- 
-- uSinavSonrasiTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipuSinavSonrasiTipi')
drop table [Lkp].[MtskAdayTakipuSinavSonrasiTipi]

create table [Lkp].[MtskAdayTakipuSinavSonrasiTipi]
(
   Id               Int Unique not null, 
   uSinavSonrasiTipi  nVarchar(100)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption       nVarchar(20)   null,
   FormCaption        nVarchar(15)   null, 
   
   constraint  pk_MtskAdayTakipuSinavSonrasıTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipuSinavSonrasiTipi]
INSERT INTO [Lkp].[MtskAdayTakipuSinavSonrasiTipi] (Id, uSinavSonrasiTipi, ChartCaption, FormCaption)
 VALUES 
  ( 0,    N'', '', '' ),
  ( 1,    N'Sınava tekrar girecek', 'Tekrar girecek', '' ),
  ( 2,    N'Sertifika aşamasına geçti', 'Sertifikayı kazandı', '' ),
  ( 3,    N'Tüm uygulamalı sınav hakkı bitti, 2.Uygulama (+4) hakkını kullanacak mı ? ', 'Sınav hakkı bitti', '' ),
  ( 4,    N'2.Uygulama (+4) sınav hakkı bitti', '2Uyg.sınav hak bitti', '' )


-- ------------------------------------------------------- 
-- uSinavUcretTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipuSinavUcretTipi')
drop table [Lkp].[MtskAdayTakipuSinavUcretTipi]

create table [Lkp].[MtskAdayTakipuSinavUcretTipi]
(
   Id               Int Unique not null, 
   uSinavUcretTipi  nVarchar(50)   null
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   
   constraint  pk_MtskAdayTakipuSinavUcretTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipuSinavUcretTipi]
INSERT INTO [Lkp].[MtskAdayTakipuSinavUcretTipi] (Id, uSinavUcretTipi)
 VALUES 
  ( 0,    N'Adayın kendisi yatıracak'),
  ( 1,    N'Biz yatıracağız')


-- ------------------------------------------------------- 
-- SertifikaDurumTipiId
-- ------------------------------------------------------- 
IF EXISTS (Select * From sys.objects WHERE name = 'MtskAdayTakipSertifikaDurumTipi')
drop table [Lkp].[MtskAdayTakipSertifikaDurumTipi]

create table [Lkp].[MtskAdayTakipSertifikaDurumTipi]
(
   Id                 Int Unique not null, 
   SertifikaDurumTipi nVarchar(50)   null,
   KonuGrupId       SmallInt       null,
   KonuId           Int            null,
   KonuCaption      nVarchar(20)   null,
   ChartCaption       nVarchar(20)   null,
   FormCaption        nVarchar(15)   null,
   
   constraint  pk_MtskAdayTakipSertifikaDurumTipi primary key (Id)
)

Delete from [Lkp].[MtskAdayTakipSertifikaDurumTipi]
INSERT INTO [Lkp].[MtskAdayTakipSertifikaDurumTipi] (Id, SertifikaDurumTipi, ChartCaption, FormCaption)
 VALUES 
  ( 0,    N'', '', '' ),
  ( 1,    N'Sertifikası hazırlanacak (Seri No verilecek)', 'Sert. hazırlanacak', '' ),
  ( 2,    N'Sertifika formu yazdırılacak', 'Sert. formu yaz', '' ),
  ( 3,    N'Sertifikası hazır', 'Sert. hazır', '' ),
  ( 4,    N'Sertifikası teslim edildi', 'Sert. teslim edildi', '' )


commit transaction

/*CreateLkpTableEnd*/


/*

   KonuGrupId  = 1 : Aday kayıtları
   -----------------------------------------
 1110  TalepTipiId            SmallInt     null, /* 1. sertifika, 2. (2.+4 hak), 3. Nakil 2.+4hak, 4. 100Ceza, 5. Özel Uyg Ders   */ 
 1120  KayitTipiId            SmallInt     null, /* trg_MtskAday : 1. Ön kayıt, 2. Kayıt aşamasında, 3. Kesin Kayıt ...  */ 
 1130  ZamanlamaTipiId        SmallInt     null, /* detay aşağıda */
 1140  IsGrupSubeYok          Bit          null, /* grup veya şubesi belli değilse  */
 1150  IsEgitimDevamEdiyor    Bit          null, /* eğitim devam edenler = 1, değilse = 0 : sorgularda kolaylık olsun diye var  */ 
 1160  MebbisKurumOnayi       Bit          null, /* trg_MtskAday : 0-Onaysız, 1-Onaylandı */	
 1170  MebbisDurumTipiId      SmallInt     null, /* trg_MtskAday :  detay aşağıda */
 1210  YasOnayiTipiId         SmallInt     null, /* 1-Yaşı Tutmuyor, 2-Yaşı Tutuyor, 3. Diğer sebeplerle onaylı */
 1220  OzurDurumTipiId        SmallInt     null, /* MtskAdaySaglik tan gelecek bilgi  */
 1230  BelgelerGeldi          Bit          null, /* tamamı geldiyse */
 1240  BelgelerTarandi        Bit          null, /* tamamı tarandıysa */
 1250  BelgelerYuklendi       Bit          null, /* tamamı yüklendiyse */
 1260  EgitimSureciTipiId     SmallInt     null, /* detay aşağıda */

   BorcDurumuTipiId         SmallInt     null,


   KonuGrupId  = 2 : Dönem grup şube
   -----------------------------------------


   KonuGrupId  = 3 : Teorik dersler
   -----------------------------------------

   KonuGrupId  = 4 : e-Sınav süreci
   -----------------------------------------


   KonuGrupId  = 5 : uygulamalı dersler
   -----------------------------------------


   KonuGrupId  = 6 : uygulamalı sınavlar
   -----------------------------------------


   KonuGrupId  = 7 : sertifika süreci
   -----------------------------------------


   KonuGrupId  = 8 : aday listesi ve borçları
   -----------------------------------------





*/

