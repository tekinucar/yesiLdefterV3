/*CreateProcedure*/

CREATE PROCEDURE [dbo].[prc_MtskAdayBelgeResimleri] (@TalepId int)  
AS BEGIN
   
--declare @TalepId Int = 200
--declare @DonemTipiId Int = 202101
  declare @AdayId int
  declare @TamAdiSoyadi nvarchar(100)
  declare @TcNo varchar(11)

  Select  
    @AdayId = talep.AdayId
  , @TamAdiSoyadi = aday.TamAdiSoyadi
  , @TcNo = aday.TcNo
  From MtskAdayTalep as talep, MtskAday as aday
  Where talep.AdayId = aday.Id
  and   talep.Id = @TalepId 

  Select 
    Id as Id
  , TamAdiSoyadi, TcNo
  , 'Biyometrik' as LkpImageType
  , 'Biyometrik' as LkpBelgeAdi
  , 'MtskAday' as LkpTableName
  , 'BiyometrikResim' as LkpFieldName
  , 'BiyometrikResimSmall' as LkpSmallFieldName
  , 'Id' as LkpMasterIdValue
  , 'Id' as LkpIdFieldName
  , BiyometrikResim as LkpImage
  , BiyometrikResimSmall as LkpSmallImage
  , 394 as LkpWidth
  , 512 as LkpHeight
  , 400 as LkpDpi
  , 'jpg' as LkpFormat

  From MtskAday
  Where Id = @AdayId

  Union All
  
  Select 
    Id 
  , @TamAdiSoyadi as TamAdiSoyadi
  , @TcNo as TcNo
  , 'KiloByteKontrollu' as LkpImageType
  , 'Başvuru' as LkpBelgeAdi
  , 'MtskAdayTalep' as LkpTableName
  , 'BasvuruResim' as LkpFieldName
  , 'BasvuruResimSmall' as LkpSmallFieldName
  , 'Id' as LkpMasterIdValue
  , 'Id' as LkpIdFieldName
  , BasvuruResim as LkpImage
  , BasvuruResimSmall as LkpSmallImage
  , 350 as LkpWidth
  , 450 as LkpHeight
  , 96  as LkpDpi 
  , 'png' as LkpFormat
  
  From MtskAdayTalep
  Where Id = @TalepId

  Union All
  
  Select 
    TalepId as Id
  , @TamAdiSoyadi as TamAdiSoyadi
  , @TcNo as TcNo
  , 'KiloByteKontrollu' as LkpImageType
  , 'Öğrenim Belgesi' as LkpBelgeAdi
  , 'MtskAdayOgrenim' as LkpTableName
  , 'OgrenimBelgesiResim' as LkpFieldName
  , 'OgrenimBelgesiResimSmall' as LkpSmallFieldName
  , 'TalepId' as LkpMasterIdValue
  , 'TalepId' as LkpIdFieldName
  , OgrenimBelgesiResim as LkpImage
  , OgrenimBelgesiResimSmall as LkpSmallImage
  , 0 as LkpWidth
  , 0 as LkpHeight
  , 96  as LkpDpi 
  , 'jpg' as LkpFormat
  
  From MtskAdayOgrenim
  Where TalepId = @TalepId
  
  Union All

  Select 
    TalepId as Id
  , @TamAdiSoyadi as TamAdiSoyadi
  , @TcNo as TcNo
  , 'KiloByteKontrollu' as LkpImageType
  , 'Sağlık Raporu' as LkpBelgeAdi
  , 'MtskAdaySaglik' as LkpTableName
  , 'SaglikRaporuResim' as LkpFieldName
  , 'SaglikRaporuResimSmall' as LkpSmallFieldName
  , 'TalepId' as LkpMasterIdValue
  , 'TalepId' as LkpIdFieldName
  , SaglikRaporuResim as LkpImage
  , SaglikRaporuResimSmall as LkpSmallImage
  , 0 as LkpWidth
  , 0 as LkpHeight
  , 96  as LkpDpi  
  , 'jpg' as LkpFormat
  
  From MtskAdaySaglik
  Where TalepId = @TalepId

  Union All

  Select 
    TalepId as Id
  , @TamAdiSoyadi as TamAdiSoyadi
  , @TcNo as TcNo
  , 'KiloByteKontrollu' as LkpImageType
  , 'Adli Sicil Raporu' as LkpBelgeAdi
  , 'MtskAdayAdliSicil' as LkpTableName
  , 'SavcilikBelgesiResim' as LkpFieldName
  , 'SavcilikBelgesiResimSmall' as LkpSmallFieldName
  , 'TalepId' as LkpMasterIdValue
  , 'TalepId' as LkpIdFieldName
  , SavcilikBelgesiResim as LkpImage
  , SavcilikBelgesiResimSmall as LkpSmallImage
  , 0 as LkpWidth
  , 0 as LkpHeight
  , 96  as LkpDpi  
  , 'jpg' as LkpFormat
  
  From MtskAdayAdliSicil
  Where TalepId = @TalepId

  Union All

  Select 
    TalepId as Id
  , @TamAdiSoyadi as TamAdiSoyadi
  , @TcNo as TcNo
  , 'Imza' as LkpImageType
  , 'İmza' as LkpBelgeAdi
  , 'MtskAdayImza' as LkpTableName
  , 'ImzaResim' as LkpFieldName
  , 'ImzaResimSmall' as LkpSmallFieldName
  , 'TalepId' as LkpMasterIdValue
  , 'TalepId' as LkpIdFieldName
  , ImzaResim as LkpImage
  , ImzaResimSmall as LkpSmallImage
  , 472 as LkpWidth
  , 472 as LkpHeight
  , 400 as LkpDpi  
  , 'jpg' as LkpFormat
  
  From MtskAdayImza
  Where TalepId = @TalepId

  Union All

  Select 
    TalepId as Id
  , @TamAdiSoyadi as TamAdiSoyadi
  , @TcNo as TcNo
  , 'KiloByteKontrollu' as LkpImageType
  , 'Sözleşme 1' as LkpBelgeAdi
  , 'MtskAdaySozlesme' as LkpTableName
  , 'Sozlesme1Resim' as LkpFieldName
  , 'Sozlesme1ResimSmall' as LkpSmallFieldName
  , 'TalepId' as LkpMasterIdValue
  , 'TalepId' as LkpIdFieldName
  , Sozlesme1Resim as LkpImage
  , Sozlesme1ResimSmall as LkpSmallImage
  , 0 as LkpWidth
  , 0 as LkpHeight
  , 96  as LkpDpi  
  , 'jpg' as LkpFormat
  
  From MtskAdaySozlesme
  Where TalepId = @TalepId


  Union All

  Select 
    TalepId as Id
  , @TamAdiSoyadi as TamAdiSoyadi
  , @TcNo as TcNo
  , 'KiloByteKontrollu' as LkpImageType
  , 'Sözleşme 2' as LkpBelgeAdi
  , 'MtskAdaySozlesme' as LkpTableName
  , 'Sozlesme2Resim' as LkpFieldName
  , 'Sozlesme2ResimSmall' as LkpSmallFieldName
  , 'TalepId' as LkpMasterIdValue
  , 'TalepId' as LkpIdFieldName
  , Sozlesme2Resim as LkpImage
  , Sozlesme2ResimSmall as LkpSmallImage
  , 0 as LkpWidth
  , 0 as LkpHeight
  , 96  as LkpDpi  
  , 'jpg' as LkpFormat
  
  From MtskAdaySozlesme
  Where TalepId = @TalepId

END -- procedure

/*CreateProcedureEnd*/

